# Задание 1. Создание и документирование API.

## Выбор типов API.
- Пользователи взаимодействуют с сервисами через HTTPS-API, описание в формате OpenAPI 3.0
- Датчкики отправляют данные в брокер сообщений NATS по протоколу MQTT, описание в формате AsyncAPI.

## Проектирование API.
### Микросервис управления пользователями - аутентификация:
1. Вывод страницы ввода логина и пароля (вход в систему) \
Эндпоинт: /login \
Метод: GET
2. Аутентификация пользователя с использованием Bearer Token (токен на предъявителя) \
Эндпоинт: /login \
Метод: POST

### Микросервис Управление конфигурациями устройств:
1. Вывод всего списка устройств \
Эндпоинт: /api/v1/devices \
Метод: GET
2. Создать новое устройство \
Эндпоинт: /api/v1/devices \
Метод: POST
3. Вывод подробной информации об устройстве включая его конфигурацию \
Эндпоинт: /api/v1/devices/{device_id} \
Метод: GET

### Микросервис Управление устройствами:
1. Вывод статуса работы устройства \
Эндпоинт: /api/v1/devices/{device_id}/control \
Метод: GET
2. Управление работой устройства \
Эндпоинт: /api/v1/devices/control \
Метод: POST

### Микросервис Коллектор сбора данных:
1. Вывод всего списка датчиков \
Эндпоинт: /api/v1/sensors \
Метод: GET
2. Вывод временного ряда по датчику на конкретное время \
Эндпоинт: /api/v1/sensors/{sensor_id}/timestamp \
Метод: GET
3. Вывод временного ряда по датчику по интервалу времени \
Эндпоинт: /api/v1/sensors/{sensor_id}/timerange \
Метод: GET

### Микросервис Коллектор сбора данных - сбор данных с датчиков:
1. Датчики передают данные в топик \
Эндпоинт: smarthome/sensors/1/0/event/{sensorId}/measured \


## Документирование API.
* [«OpenAPI для микросервиса "Управление пользователями - аутентификация"»](openapi/user-management_auth.yaml)
* [«OpenAPI для микросервиса "Управление конфигурациями устройств"»](openapi/device-management.yaml)
* [«OpenAPI для микросервиса "Управление устройствами"»](openapi/device-control.yaml)
* [«OpenAPI для микросервиса "Коллектор сбора данных"»](openapi/device-control.yaml)
* [«AsyncAPI для микросервиса "Коллектор сбора данных"»](asyncapi/sensor.yaml)
